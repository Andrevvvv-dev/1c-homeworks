# Задание к занятию "Условия и подзапросы"

## Задача № 1 "Отбор номенклатуры при обновлении цен в документе Реализация"

### Описание задачи

Изменить процедуру для команды  "Обновить цены" документа Реализация. Перечень номенклатуры получать не передачей элементов массива, а используя вложенный запрос табличной части текущего документа.

### Требования к результату

Прикрепить .cf файл из прошлого задания в котором внести изменения для получения перечня элементов номенклатуры вложенным запросом к табличной части документа Реализация.

### Процесс выполнения

1. Взять конфигурацию из прошлого задания. 
2. В форме документа Реализация для серверной процедуры команды Обновить цены внести следующие изменения:
    
    * Убрать заполнение массива элементов номенклатуры;
    * Для запроса получения цен убрать заполнение параметра СписокНоменклатуры;
    * В конструкторе запроса в параметрах виртуальной таблицы в поле условие удалить предыдущее условие и вместо него - 
      - вызвать конструктор запроса в поле условие;
      - построить запрос по табличной части документа Реализация с выборкой одного поля Номенклатура.Ссылка;
      - В операторе ГДЕ указать параметр для отбора определенной ссылки документа реализация;
      - Нажать на ОК. Полученый текст запроса использовать для условия отбора измерения Номенклатура;
    * Для запроса добавить установку параметра документа реализации текущей ссылкой, при этом проверять чтобы ссылка была не пустая;
    * Если ссылка пустая то Возврат;
3. Проверить заполнение цен для всех товаров из табличной части документа Реализация нажатием на кнопку Обновить цены.
